<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>array-as-dict.swift</title>
		<link rel="stylesheet" type="text/css" href="css/styles.css">
		<link rel="stylesheet" type="text/css" href="css/toggle-dark-side-min.css">
		<link rel="stylesheet" href="https://unpkg.com/pyloncss@latest/css/pylon.css"/>
		<script src="https://unpkg.com/htmx.org@2.0.3"></script>
		<!--<script src="https://unpkg.com/hyperscript.org@0.9.12"></script>-->
	</head>
	<body>
		
		<!--<vstack id="navigator"><ul><li>
<a	href="#"
	onclick="loadContent('/array-as-dict.swift', 'main'); return false;">
	array-as-dict.swift
</a><li>
<a	href="#"
	onclick="loadContent('/example.swift', 'main'); return false;">
	example.swift
</a><li>
<a	href="#"
	onclick="loadContent('/loginController.swift', 'main'); return false;">
	loginController.swift
</a><li>
<a	href="#"
	onclick="loadContent('/_uikit.swift', 'main'); return false;">
	_uikit.swift
</a><li>
<a	href="#"
	onclick="loadContent('/who-stole-my-mvc.swift', 'main'); return false;">
	who-stole-my-mvc.swift
</a></ul></vstack>-->
		<main id="main">
			<vstack id="floating-buttons" spacing="m">
				
				
				<button id="theme-toggle" class="theme-toggle" type="button" title="Toggle theme" aria-label="Toggle theme" onclick="toggle()">
					<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="1em" height="1em" class="theme-toggle__dark-side" fill="currentColor" viewBox="0 0 32 32">
						<path d="M16 .5C7.4.5.5 7.4.5 16S7.4 31.5 16 31.5 31.5 24.6 31.5 16 24.6.5 16 .5zm0 28.1V3.4C23 3.4 28.6 9 28.6 16S23 28.6 16 28.6z"></path>
					</svg>
				</button>
				
				<button id="toggle-color" onclick="toggleColor()">
					<div class="first"></div>
					<div class="second"></div>
					<div class="third"></div>
				</button>
				
				
			</vstack>
			<div id="go-to-line">
				<input type="text" id="line-input" placeholder="Line number" class="hide"/>
			</div>
			<div id="top-controls">
				<hstack id="top-controls-content" class="article-width">
					<spacer></spacer>
					<button id="play-button" class="button" onclick="run()">
						<?xml version="1.0" encoding="iso-8859-1"?>
						<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
						<svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
							viewBox="0 0 17.804 17.804" xml:space="preserve">®
							<g>
								<g id="c98_play">
									<path d="M2.067,0.043C2.21-0.028,2.372-0.008,2.493,0.085l13.312,8.503c0.094,0.078,0.154,0.191,0.154,0.313
			c0,0.12-0.061,0.237-0.154,0.314L2.492,17.717c-0.07,0.057-0.162,0.087-0.25,0.087l-0.176-0.04
			c-0.136-0.065-0.222-0.207-0.222-0.361V0.402C1.844,0.25,1.93,0.107,2.067,0.043z"/>
								</g>
								<g id="Capa_1_78_">
								</g>
							</g>
						</svg>
					</button>
					
					<button id="layout-button" class="button" onclick="switchViewMode()">
						<?xml version="1.0" encoding="utf-8"?>
						
						<svg width="800px" height="800px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
							<title>expand-horizontal</title>
							<g id="Layer_2" data-name="Layer 2">
								<g id="invisible_box" data-name="invisible box">
									<rect width="48" height="48" fill="none"/>
								</g>
								<g id="Q3_icons" data-name="Q3 icons">
									<g>
										<path d="M30.6,28.6a1.9,1.9,0,0,0,.2,3,2.1,2.1,0,0,0,2.7-.2l5.9-6a1.9,1.9,0,0,0,0-2.8l-5.9-6a2.1,2.1,0,0,0-2.7-.2,1.9,1.9,0,0,0-.2,3L33.2,22H14.8l2.6-2.6a1.9,1.9,0,0,0-.2-3,2.1,2.1,0,0,0-2.7.2l-5.9,6a1.9,1.9,0,0,0,0,2.8l5.9,6a2.1,2.1,0,0,0,2.7.2,1.9,1.9,0,0,0,.2-3L14.8,26H33.2Z"/>
										<path d="M42,6V42a2,2,0,0,0,4,0V6a2,2,0,0,0-4,0Z"/>
										<path d="M6,42V6A2,2,0,0,0,2,6V42a2,2,0,0,0,4,0Z"/>
									</g>
								</g>
							</g>
						</svg>
					</button>
				</hstack>
			</div>
			<hstack id="article-info" class="article-width">
				<div class="author-picture">
					<img src="assets/author.jpg"/>
				</div>
				<vstack>
					<address class="author"><a rel="author" href="https://cristian.lat">Cristian Felipe Patiño Rojas</a></address> 
					<time pubdate datetime="$datetime" title="$datetime">$datetime</time>
				</vstack>
			</hstack>
			<pre id="code" class="article-width"><code><span id="line-1" class="line-number ">1</span><span class="keyword">import</span> Foundation
<span id="line-2" class="line-number empty-line">2</span>
<span id="line-3" class="line-number ">3</span><span class="comment">En Swift, manipular datos los datos de un diccionario es bastante fácil,
<span id="line-4" class="line-number ">4</span>por ejemplo, si tuvieramos un modelo como este:</span>
<span id="line-5" class="line-number empty-line">5</span>
<span id="line-6" class="line-number ">6</span><span class="keyword">struct</span> <span class="type-definition">Model</span> {
<span id="line-7" class="line-number ">7</span>    <span class="keyword">let</span> <span class="other-definition">id</span>: <span class="type">Int</span> 
<span id="line-8" class="line-number ">8</span>    <span class="keyword">var</span> <span class="other-definition">name</span>: <span class="type">String</span>?
<span id="line-9" class="line-number ">9</span>}
<span id="line-10" class="line-number empty-line">10</span>
<span id="line-11" class="line-number ">11</span><span class="comment">Y un diccionario cuyas claves sean del tipo `id` de ese modelo:</span>
<span id="line-12" class="line-number empty-line">12</span>
<span id="line-13" class="line-number ">13</span><span class="keyword">var</span> <span class="other-definition">dict</span> = [<span class="type">Int</span>: <span class="custom-type">Model</span>]()
<span id="line-14" class="line-number empty-line">14</span>
<span id="line-15" class="line-number ">15</span><span class="comment">Podríamos realizar acciones CRUD de una manera muy sencilla:</span>
<span id="line-16" class="line-number empty-line">16</span>
<span id="line-17" class="line-number ">17</span><strong><span class="type">C</span>:</strong> dict[<span class="number">1</span>] = <span class="custom-type">Model</span>(id: <span class="number">1</span>, name: <span class="string">"Some name"</span>)
<span id="line-18" class="line-number ">18</span><strong><span class="type">R</span>:</strong> dict[<span class="number">1</span>] 
<span id="line-19" class="line-number ">19</span><strong><span class="type">U</span>:</strong> dict[<span class="number">1</span>]?.name = <span class="string">"New name"</span>
<span id="line-20" class="line-number ">20</span><strong><span class="type">D</span>:</strong> dict[<span class="number">1</span>] = <span class="keyword">nil</span>
<span id="line-21" class="line-number empty-line">21</span>
<span id="line-22" class="line-number ">22</span><span class="comment">Con un array, manipularíamos los datos de otra manera.</span>
<span id="line-23" class="line-number empty-line">23</span>
<span id="line-24" class="line-number ">24</span><span class="keyword">var</span> <span class="other-definition">array</span> = [<span class="custom-type">Model</span>]()
<span id="line-25" class="line-number empty-line">25</span>
<span id="line-26" class="line-number ">26</span><strong><span class="type">C</span>:</strong> array.<span class="call">append</span>(<span class="custom-type">Model</span>(id: <span class="number">1</span>, name: <span class="string">"Some name"</span>))
<span id="line-27" class="line-number empty-line">27</span>
<span id="line-28" class="line-number ">28</span><span class="comment">Podemos leer un elemento en el array de varias maneras:</span>
<span id="line-29" class="line-number empty-line">29</span>
<span id="line-30" class="line-number ">30</span><strong><span class="type">R</span>:</strong> array.<span class="call">filter</span> { $0.<span class="property">id</span> == <span class="number">1</span> }.first
<span id="line-31" class="line-number ">31</span><strong><span class="type">R</span>:</strong> array[<span class="number">0</span>] <span class="comment"><em>(inseguro, puede crashear)</em></span>
<span id="line-32" class="line-number ">32</span><strong><span class="type">R</span>:</strong> 
<span id="line-33" class="line-number ">33</span><span class="keyword">if let</span> idx = array.<span class="call">firstIndex</span>(where: {$0.<span class="property">id</span> == <span class="number">1</span>}) {
<span id="line-34" class="line-number ">34</span>    array[idx]
<span id="line-35" class="line-number ">35</span>}
<span id="line-36" class="line-number empty-line">36</span>
<span id="line-37" class="line-number ">37</span><strong><span class="type">U</span>:</strong>
<span id="line-38" class="line-number ">38</span><span class="keyword">if let</span> idx = array.<span class="call">firstIndex</span>(where: {$0.<span class="property">id</span> == <span class="number">1</span>}) {
<span id="line-39" class="line-number ">39</span>    array[idx].name = <span class="string">"Some name"</span>
<span id="line-40" class="line-number ">40</span>}
<span id="line-41" class="line-number empty-line">41</span>
<span id="line-42" class="line-number ">42</span><strong><span class="type">D</span>:</strong>
<span id="line-43" class="line-number ">43</span><span class="keyword">if let</span> idx = array.<span class="call">firstIndex</span>(where: {$0.<span class="property">id</span> == <span class="number">1</span>}) {
<span id="line-44" class="line-number ">44</span>    array.<span class="call">remove</span>(at: idx)
<span id="line-45" class="line-number ">45</span>}
<span id="line-46" class="line-number empty-line">46</span>
<span id="line-47" class="line-number ">47</span><span class="comment">Cómo vemos, la ergonomía de un diccionario es mucho más concisa,
<span id="line-48" class="line-number ">48</span>especialmente en los casos de actualización y eliminación,
<span id="line-49" class="line-number ">49</span>que con un array necesitan de un paso previo de recuperación
<span id="line-50" class="line-number ">50</span>del índice del elemento a eliminar
<span id="line-51" class="line-number empty-line">51</span>
<span id="line-52" class="line-number ">52</span>Gracias a que Swift permite métodos `subscript` personalizados para 
<span id="line-53" class="line-number ">53</span>colecciones, podemos obtener una api de manipulación de arrays idéntica
<span id="line-54" class="line-number ">54</span>a la de un diccionario.
<span id="line-55" class="line-number empty-line">55</span>
<span id="line-56" class="line-number ">56</span>El único requisito es que los elementos del diccionario conformen al
<span id="line-57" class="line-number ">57</span>protocolo identifiable.
<span id="line-58" class="line-number empty-line">58</span>
<span id="line-59" class="line-number ">59</span><strong>Implementación:</strong>
<span id="line-60" class="line-number empty-line">60</span>
<span id="line-61" class="line-number ">61</span>El subscript encapsula el boilerplate de creación, lectura, actualización
<span id="line-62" class="line-number ">62</span>y eliminación que generalmente declaramos de forma manual con un array:</span>
<span id="line-63" class="line-number empty-line">63</span>
<span id="line-64" class="line-number ">64</span><span class="keyword-extension">extension</span> <span class="type">Array</span> <span class="keyword">where</span> <span class="type">Element</span>: <span class="type">Identifiable</span> {
<span id="line-65" class="line-number ">65</span>    <span class="comment">
<span id="line-66" class="line-number ">66</span>    Toma come clave el id de sus elementos,
<span id="line-67" class="line-number ">67</span>    y al igual que un diccionario, devuelve un elemento opcional:</span>
<span id="line-68" class="line-number empty-line">68</span>    
<span id="line-69" class="line-number ">69</span>    <span class="keyword">subscript</span>(id: <span class="type">Element</span>.<span class="type">ID</span>) -&gt; <span class="type">Element</span>? {
<span id="line-70" class="line-number ">70</span>        <span class="keyword">get</span> { <span class="call">first</span> { $0.<span class="property">id</span> == id } }
<span id="line-71" class="line-number ">71</span>        <span class="call">set</span>(newValue) {
<span id="line-72" class="line-number empty-line">72</span>            
<span id="line-73" class="line-number ">73</span>            <span class="comment"><strong>Creación / Actualización / Eliminación:</strong></span>
<span id="line-74" class="line-number empty-line">74</span>            
<span id="line-75" class="line-number ">75</span>            <span class="keyword">if let</span> index = <span class="call">firstIndex</span>(where: { $0.<span class="property">id</span> == id }) {
<span id="line-76" class="line-number ">76</span>                <span class="keyword">if let</span> newValue = newValue {
<span id="line-77" class="line-number ">77</span>                    <span class="keyword">self</span>[index] = newValue
<span id="line-78" class="line-number ">78</span>                } <span class="keyword">else</span> {
<span id="line-79" class="line-number ">79</span>                    <span class="call">remove</span>(at: index)
<span id="line-80" class="line-number ">80</span>                }
<span id="line-81" class="line-number ">81</span>            } <span class="keyword">else if let</span> newValue = newValue {
<span id="line-82" class="line-number ">82</span>                <span class="call">append</span>(newValue)
<span id="line-83" class="line-number ">83</span>            }
<span id="line-84" class="line-number ">84</span>        }
<span id="line-85" class="line-number ">85</span>    }
<span id="line-86" class="line-number ">86</span>}
<span id="line-87" class="line-number empty-line">87</span>
<span id="line-88" class="line-number ">88</span><span class="comment"><strong>Uso:</strong></span>
<span id="line-89" class="line-number empty-line">89</span>
<span id="line-90" class="line-number ">90</span><span class="keyword">struct</span> <span class="type-definition">Todo</span>: <span class="type">Identifiable</span> {
<span id="line-91" class="line-number ">91</span>    <span class="keyword">let</span> <span class="other-definition">id</span> = <span class="type">UUID</span>()
<span id="line-92" class="line-number ">92</span>    <span class="keyword">var</span> <span class="other-definition">description</span>: <span class="type">String</span>
<span id="line-93" class="line-number ">93</span>    <span class="keyword">var</span> <span class="other-definition">isChecked</span> = <span class="keyword">false
<span id="line-94" class="line-number empty-line">94</span>    
<span id="line-95" class="line-number ">95</span>    init</span>(<span class="keyword">_</span> description: <span class="type">String</span>) {
<span id="line-96" class="line-number ">96</span>        <span class="keyword">self</span>.<span class="property">description</span> = description
<span id="line-97" class="line-number ">97</span>    }
<span id="line-98" class="line-number ">98</span>}
<span id="line-99" class="line-number empty-line">99</span>
<span id="line-100" class="line-number ">100</span><span class="keyword">final class</span> <span class="type-definition">TodoStore</span>: <span class="type">ObservableObject</span> {
<span id="line-101" class="line-number empty-line">101</span>    
<span id="line-102" class="line-number ">102</span>    <span class="keyword">@Published private(set) var</span> data = [<span class="custom-type">Todo</span>]()
<span id="line-103" class="line-number empty-line">103</span>    
<span id="line-104" class="line-number ">104</span>    <span class="comment"><em><u>😎 Con subscript:</u></em></span>
<span id="line-105" class="line-number empty-line">105</span>    
<span id="line-106" class="line-number ">106</span>    <span class="keyword">func</span> <span class="other-definition">check_1</span>(<span class="keyword">_</span> id: <span class="type">UUID</span>) {
<span id="line-107" class="line-number ">107</span>        data[id]?.isChecked.<span class="call">toggle</span>()
<span id="line-108" class="line-number ">108</span>    }
<span id="line-109" class="line-number empty-line">109</span>    
<span id="line-110" class="line-number ">110</span>    <span class="comment"><em><u>😫 Sin subscript:</u></em></span>
<span id="line-111" class="line-number empty-line">111</span>    
<span id="line-112" class="line-number ">112</span>    <span class="keyword">func</span> <span class="other-definition">check_2</span>(<span class="keyword">_</span> id: <span class="type">UUID</span>) {
<span id="line-113" class="line-number ">113</span>        <span class="keyword">if let</span> index = data.<span class="call">firstIndex</span>(where: { $0.<span class="property">id</span> == id }) {
<span id="line-114" class="line-number ">114</span>            data[index].isChecked.<span class="call">toggle</span>()
<span id="line-115" class="line-number ">115</span>        }
<span id="line-116" class="line-number ">116</span>    }
<span id="line-117" class="line-number empty-line">117</span>    
<span id="line-118" class="line-number ">118</span>    <span class="comment"><em><u>🎉 Más ejemplos:</u></em></span>
<span id="line-119" class="line-number empty-line">119</span>    
<span id="line-120" class="line-number ">120</span>    <span class="keyword">func</span> <span class="other-definition">upsert</span>(item: <span class="custom-type">Todo</span>) {
<span id="line-121" class="line-number ">121</span>        data[item.<span class="property">id</span>] = item
<span id="line-122" class="line-number ">122</span>    }
<span id="line-123" class="line-number empty-line">123</span>    
<span id="line-124" class="line-number ">124</span>    <span class="keyword">func</span> <span class="other-definition">read</span>(id: <span class="type">UUID</span>) -&gt; <span class="custom-type">Todo</span>? {
<span id="line-125" class="line-number ">125</span>        data[id]
<span id="line-126" class="line-number ">126</span>    }
<span id="line-127" class="line-number empty-line">127</span>    
<span id="line-128" class="line-number ">128</span>    <span class="keyword">func</span> <span class="other-definition">delete</span>(id: <span class="type">UUID</span>) {
<span id="line-129" class="line-number ">129</span>        data[id] = <span class="keyword">nil</span>
<span id="line-130" class="line-number ">130</span>    }
<span id="line-131" class="line-number ">131</span>}
<span id="line-132" class="line-number empty-line">132</span>
<span id="line-133" class="line-number ">133</span><span class="comment"><strong>MARK: - Tests:</strong></span>
<span id="line-134" class="line-number empty-line">134</span>
<span id="line-135" class="line-number ">135</span><span class="keyword">struct</span> <span class="type-definition">User</span>: <span class="type">Identifiable</span>, <span class="type">Equatable</span> {
<span id="line-136" class="line-number ">136</span>    <span class="keyword">var</span> <span class="other-definition">id</span> = <span class="type">UUID</span>()
<span id="line-137" class="line-number ">137</span>    <span class="keyword">var</span> <span class="other-definition">firstName</span>: <span class="type">String</span>
<span id="line-138" class="line-number ">138</span>    <span class="keyword">var</span> <span class="other-definition">lastName</span>: <span class="type">String</span>
<span id="line-139" class="line-number ">139</span>}
<span id="line-140" class="line-number empty-line">140</span>
<span id="line-141" class="line-number ">141</span><span class="keyword">final class</span> <span class="type-definition">ArraySubscriptTests</span> {
<span id="line-142" class="line-number ">142</span>    <span class="keyword">@objc func</span> tests_create() {
<span id="line-143" class="line-number ">143</span>        <span class="keyword">let</span> <span class="other-definition">user</span> = <span class="custom-type">User</span>(firstName: <span class="string">"Cristian"</span>, lastName: <span class="string">"Patiño"</span>)
<span id="line-144" class="line-number ">144</span>        <span class="keyword">var</span> <span class="other-definition">sut</span> = [<span class="custom-type">User</span>]()
<span id="line-145" class="line-number ">145</span>        sut[user.<span class="property">id</span>] = user
<span id="line-146" class="line-number ">146</span>        <span class="call">expect</span>(sut[user.<span class="property">id</span>]!.firstName).<span class="call">toBe</span>(<span class="call">equalTo</span>(<span class="string">"Cristian"</span>))
<span id="line-147" class="line-number ">147</span>    }
<span id="line-148" class="line-number empty-line">148</span>    
<span id="line-149" class="line-number ">149</span>    <span class="keyword">@objc func</span> tests_update() {
<span id="line-150" class="line-number ">150</span>        <span class="keyword">var</span> <span class="other-definition">user</span> = <span class="custom-type">User</span>(firstName: <span class="string">"Cristian"</span>, lastName: <span class="string">"Patiño"</span>)
<span id="line-151" class="line-number ">151</span>        <span class="keyword">var</span> <span class="other-definition">sut</span> = [<span class="custom-type">User</span>]()
<span id="line-152" class="line-number ">152</span>        sut[user.<span class="property">id</span>] = user
<span id="line-153" class="line-number empty-line">153</span>        
<span id="line-154" class="line-number ">154</span>        <span class="comment">Update</span>
<span id="line-155" class="line-number ">155</span>        user.<span class="property">firstName</span> = <span class="string">"Cristian Felipe"</span>
<span id="line-156" class="line-number ">156</span>        sut[user.<span class="property">id</span>] = user
<span id="line-157" class="line-number empty-line">157</span>        
<span id="line-158" class="line-number ">158</span>        <span class="call">expect</span>(sut[user.<span class="property">id</span>]!.firstName).<span class="call">toBe</span>(<span class="call">equalTo</span>(<span class="string">"Cristian Felipe"</span>))
<span id="line-159" class="line-number ">159</span>    }
<span id="line-160" class="line-number empty-line">160</span>    
<span id="line-161" class="line-number ">161</span>    <span class="keyword">@objc func</span> test_delete() {
<span id="line-162" class="line-number ">162</span>        <span class="keyword">let</span> <span class="other-definition">user</span> = <span class="custom-type">User</span>(firstName: <span class="string">"Cristian"</span>, lastName: <span class="string">"Patiño"</span>)
<span id="line-163" class="line-number ">163</span>        <span class="keyword">var</span> <span class="other-definition">sut</span> = [<span class="custom-type">User</span>]()
<span id="line-164" class="line-number ">164</span>        sut[user.<span class="property">id</span>] = user
<span id="line-165" class="line-number ">165</span>        <span class="call">expect</span>(sut[user.<span class="property">id</span>]!.firstName).<span class="call">toBe</span>(<span class="call">equalTo</span>(<span class="string">"Cristian"</span>))
<span id="line-166" class="line-number ">166</span>        sut[user.<span class="property">id</span>] = <span class="keyword">nil</span>
<span id="line-167" class="line-number ">167</span>        expect(sut[user.<span class="property">id</span>]).<span class="call">toBe</span>(<span class="call">equalTo</span>(<span class="keyword">nil</span>))
<span id="line-168" class="line-number ">168</span>    }
<span id="line-169" class="line-number ">169</span>}
<span id="line-170" class="line-number empty-line">170</span>
<span id="line-171" class="line-number ">171</span><span class="call">runAll</span>(<span class="custom-type">ArraySubscriptTests</span>())
<span id="line-172" class="line-number empty-line">172</span>
<span id="line-173" class="line-number ">173</span><span class="keyword">struct</span> <span class="type-definition">Wrapper</span>&lt;T&gt; { 
<span id="line-174" class="line-number ">174</span>    <span class="keyword">let</span> <span class="other-definition">t</span>: <span class="type">T</span>
<span id="line-175" class="line-number ">175</span>    <span class="keyword">let</span> <span class="other-definition">line</span>: <span class="type">UInt</span>
<span id="line-176" class="line-number ">176</span>    <span class="keyword">init</span>(<span class="keyword">_</span> t: <span class="type">T</span>, line: <span class="type">UInt</span>) {<span class="keyword">self</span>.<span class="property">t</span> = t; <span class="keyword">self</span>.<span class="property">line</span> = line}
<span id="line-177" class="line-number ">177</span>}
<span id="line-178" class="line-number empty-line">178</span>
<span id="line-179" class="line-number ">179</span><span class="keyword">infix operator</span> &lt;&lt; : <span class="type">AdditionPrecedence</span>
<span id="line-180" class="line-number empty-line">180</span>
<span id="line-181" class="line-number ">181</span><span class="comment">Definir la función que implementa la operación</span>
<span id="line-182" class="line-number ">182</span><span class="keyword">func</span> &lt;&lt; (left: <span class="type">String</span>, right: <span class="type">String</span>) -&gt; <span class="type">String</span> {
<span id="line-183" class="line-number ">183</span>    <span class="keyword">return</span> left + <span class="string">" "</span> + right
<span id="line-184" class="line-number ">184</span>}
<span id="line-185" class="line-number empty-line">185</span>
<span id="line-186" class="line-number ">186</span><span class="keyword">func</span> &lt;&lt; (left: <span class="type">String</span>, right: <span class="type">Any</span>) -&gt; <span class="type">String</span> {
<span id="line-187" class="line-number ">187</span>    <span class="keyword">return</span> left + <span class="string">" "</span> + <span class="string">"</span>\(right)<span class="string">"</span>
<span id="line-188" class="line-number ">188</span>}
<span id="line-189" class="line-number empty-line">189</span>
<span id="line-190" class="line-number ">190</span><span class="keyword">infix operator</span> &gt;: <span class="type">AdditionPrecedence</span>
<span id="line-191" class="line-number ">191</span><span class="keyword">func</span> &gt;&lt;<span class="type">T</span>: <span class="type">Numeric</span> &amp; <span class="type">Comparable</span>&gt;(left: <span class="custom-type">Wrapper</span>&lt;<span class="type">T</span>&gt;, right: <span class="type">T</span>) { 
<span id="line-192" class="line-number ">192</span>    <span class="keyword">let</span> <span class="other-definition">icon</span> = left.<span class="property">t</span> &gt; right ? <span class="string">"✅"</span> : <span class="string">"❌"</span>
<span id="line-193" class="line-number ">193</span>    <span class="keyword">let</span> <span class="other-definition">result</span> = left.<span class="property">t</span> &gt; right ? <span class="string">"is greater than"</span> : <span class="string">"is lesser than"</span>
<span id="line-194" class="line-number ">194</span>    <span class="call">print</span>(left.<span class="property">line</span>.<span class="property">description</span> &lt;&lt; icon &lt;&lt; left.<span class="property">t</span> &lt;&lt; result &lt;&lt; right)
<span id="line-195" class="line-number ">195</span>}
<span id="line-196" class="line-number empty-line">196</span>
<span id="line-197" class="line-number ">197</span><span class="keyword">infix operator</span> &lt;: <span class="type">AdditionPrecedence</span>
<span id="line-198" class="line-number ">198</span><span class="keyword">func</span> &lt;&lt;<span class="type">T</span>: <span class="type">Numeric</span> &amp; <span class="type">Comparable</span>&gt;(left: <span class="custom-type">Wrapper</span>&lt;<span class="type">T</span>&gt;, right: <span class="type">T</span>) { 
<span id="line-199" class="line-number ">199</span>    <span class="keyword">let</span> <span class="other-definition">icon</span> = left.<span class="property">t</span> &lt; right ? <span class="string">"✅"</span> : <span class="string">"❌"</span>
<span id="line-200" class="line-number ">200</span>    <span class="keyword">let</span> <span class="other-definition">result</span> = left.<span class="property">t</span> &lt; right ? <span class="string">"is lesser than"</span> : <span class="string">"is greater than"</span>
<span id="line-201" class="line-number ">201</span>    <span class="call">print</span>(left.<span class="property">line</span>.<span class="property">description</span> &lt;&lt; icon &lt;&lt; left.<span class="property">t</span> &lt;&lt; result &lt;&lt; right)
<span id="line-202" class="line-number ">202</span>}
<span id="line-203" class="line-number empty-line">203</span>
<span id="line-204" class="line-number empty-line">204</span>
<span id="line-205" class="line-number ">205</span><span class="keyword">func</span> <span class="other-definition">expect</span>&lt;T&gt;(<span class="keyword">_</span> t: <span class="type">T</span>, line: <span class="type">UInt</span> = <span class="keyword">#line</span>) -&gt; <span class="custom-type">Wrapper</span>&lt;<span class="type">T</span>&gt; {.<span class="keyword">init</span>(t, line: line)}
<span id="line-206" class="line-number ">206</span><span class="comment">func equal&lt;T&gt; (_ t: T, line: UInt = #line) -&gt; Wrapper&lt;T&gt; {.init(t, line: line)}</span>
<span id="line-207" class="line-number empty-line">207</span>
<span id="line-208" class="line-number ">208</span><span class="keyword">enum</span> <span class="type-definition">AssertOperator</span>&lt;T&gt; { 
<span id="line-209" class="line-number ">209</span>    <span class="keyword">case</span> <span class="other-definition">equal</span>(<span class="type">T</span>)
<span id="line-210" class="line-number ">210</span>    <span class="keyword">case</span> <span class="other-definition">different</span>(<span class="type">T</span>)
<span id="line-211" class="line-number ">211</span>}
<span id="line-212" class="line-number empty-line">212</span>
<span id="line-213" class="line-number ">213</span><span class="keyword-extension">extension</span> <span class="custom-type">Wrapper</span> <span class="keyword">where</span> <span class="type">T</span>: <span class="type">Equatable</span> {
<span id="line-214" class="line-number ">214</span>    <span class="keyword">func</span> <span class="other-definition">toBe</span>(<span class="keyword">_</span> op: <span class="custom-type">AssertOperator</span>&lt;<span class="type">T</span>&gt;, line: <span class="type">UInt</span> = <span class="keyword">#line</span>) { 
<span id="line-215" class="line-number ">215</span>        <span class="keyword">switch</span> op { 
<span id="line-216" class="line-number ">216</span>            <span class="keyword">case</span> .<span class="dotAccess">equal</span>(<span class="keyword">let</span> <span class="other-definition">new</span>):
<span id="line-217" class="line-number ">217</span>            <span class="keyword">let</span> <span class="other-definition">icon</span> = <span class="keyword">self</span>.<span class="property">t</span> == new ? <span class="string">"✅"</span> : <span class="string">"❌"</span>
<span id="line-218" class="line-number ">218</span>            <span class="keyword">let</span> <span class="other-definition">result</span> = <span class="keyword">self</span>.<span class="property">t</span> == new ? <span class="string">"is equal to"</span> : <span class="string">"is different from"</span>
<span id="line-219" class="line-number ">219</span>            <span class="call">print</span>(line.<span class="property">description</span> &lt;&lt; icon &lt;&lt; <span class="keyword">self</span>.<span class="property">t</span> &lt;&lt; result &lt;&lt; new)
<span id="line-220" class="line-number empty-line">220</span>            
<span id="line-221" class="line-number ">221</span>            <span class="keyword">case</span> .<span class="dotAccess">different</span>(<span class="keyword">let</span> <span class="other-definition">new</span>):
<span id="line-222" class="line-number ">222</span>            <span class="keyword">let</span> <span class="other-definition">icon</span> = <span class="keyword">self</span>.<span class="property">t</span> != new ? <span class="string">"✅"</span> : <span class="string">"❌"</span>
<span id="line-223" class="line-number ">223</span>            <span class="keyword">let</span> <span class="other-definition">result</span> = <span class="keyword">self</span>.<span class="property">t</span> == new ? <span class="string">"is equal to"</span> : <span class="string">"is different from"</span>
<span id="line-224" class="line-number ">224</span>            <span class="call">print</span>(line.<span class="property">description</span> &lt;&lt; icon &lt;&lt; <span class="keyword">self</span>.<span class="property">t</span> &lt;&lt; result &lt;&lt; new)
<span id="line-225" class="line-number ">225</span>        }
<span id="line-226" class="line-number ">226</span>    }
<span id="line-227" class="line-number ">227</span>}
<span id="line-228" class="line-number empty-line">228</span>
<span id="line-229" class="line-number ">229</span><span class="keyword-extension">extension</span> <span class="custom-type">Wrapper</span> <span class="keyword">where</span> <span class="type">T</span> == <span class="type">Bool</span> {
<span id="line-230" class="line-number ">230</span>    <span class="keyword">func</span> <span class="other-definition">toBe</span>(<span class="keyword">_</span> bool: <span class="type">Bool</span>, line: <span class="type">UInt</span> = <span class="keyword">#line</span>) {
<span id="line-231" class="line-number ">231</span>        <span class="keyword">let</span> <span class="other-definition">icon</span> = <span class="keyword">self</span>.<span class="property">t</span> == bool ? <span class="string">"✅"</span> : <span class="string">"❌"</span>
<span id="line-232" class="line-number ">232</span>        <span class="keyword">let</span> <span class="other-definition">result</span> = <span class="keyword">self</span>.<span class="property">t</span> == bool ? <span class="string">"is equal to"</span> : <span class="string">"is different from"</span>
<span id="line-233" class="line-number ">233</span>        <span class="call">print</span>(line.<span class="property">description</span> &lt;&lt; icon &lt;&lt; <span class="keyword">self</span>.<span class="property">t</span> &lt;&lt; result &lt;&lt; bool)
<span id="line-234" class="line-number ">234</span>    }
<span id="line-235" class="line-number ">235</span>}
<span id="line-236" class="line-number empty-line">236</span>
<span id="line-237" class="line-number ">237</span><span class="keyword">func</span> <span class="other-definition">equalTo</span>&lt;T&gt;(<span class="keyword">_</span> object: <span class="type">T</span>) -&gt; <span class="custom-type">AssertOperator</span>&lt;<span class="type">T</span>&gt; {.<span class="call">equal</span>(object)}
<span id="line-238" class="line-number ">238</span><span class="keyword">func</span> <span class="other-definition">differentFrom</span>&lt;T&gt;(<span class="keyword">_</span> object: <span class="type">T</span>) -&gt; <span class="custom-type">AssertOperator</span>&lt;<span class="type">T</span>&gt; {.<span class="call">different</span>(object)}
<span id="line-239" class="line-number empty-line">239</span>
<span id="line-240" class="line-number empty-line">240</span>
<span id="line-241" class="line-number ">241</span><span class="keyword">func</span> <span class="other-definition">runAll</span>(<span class="keyword">_</span> object: <span class="type">AnyObject</span>) {
<span id="line-242" class="line-number ">242</span>    <span class="keyword">var</span> <span class="other-definition">count</span>: <span class="type">UInt32</span> = <span class="number">0</span>
<span id="line-243" class="line-number ">243</span>    <span class="keyword">let</span> <span class="other-definition">methods</span> = <span class="call">class_copyMethodList</span>(<span class="call">object_getClass</span>(object), &amp;count)
<span id="line-244" class="line-number empty-line">244</span>    
<span id="line-245" class="line-number ">245</span>    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="type">Int</span>(count) {
<span id="line-246" class="line-number ">246</span>        <span class="keyword">let</span> <span class="other-definition">method</span> = methods![i]
<span id="line-247" class="line-number ">247</span>        <span class="keyword">let</span> <span class="other-definition">selector</span> = <span class="call">method_getName</span>(method)
<span id="line-248" class="line-number ">248</span>        <span class="keyword">if</span> <span class="call">method_getNumberOfArguments</span>(method) == <span class="number">2</span> {
<span id="line-249" class="line-number ">249</span>            <span class="keyword">let</span> <span class="other-definition">implementation</span> = <span class="call">method_getImplementation</span>(method)
<span id="line-250" class="line-number ">250</span>            <span class="keyword">typealias</span> <span class="type-definition">Function</span> = <span class="keyword">@convention</span>(c) (<span class="type">AnyObject</span>, <span class="type">Selector</span>) -&gt; <span class="type">Void</span>
<span id="line-251" class="line-number ">251</span>            <span class="keyword">let</span> <span class="other-definition">function</span> = <span class="call">unsafeBitCast</span>(implementation, to: <span class="custom-type">Function</span>.<span class="keyword">self</span>)
<span id="line-252" class="line-number ">252</span>            <span class="call">function</span>(object, selector)
<span id="line-253" class="line-number ">253</span>        }
<span id="line-254" class="line-number ">254</span>    }
<span id="line-255" class="line-number empty-line">255</span>    
<span id="line-256" class="line-number ">256</span>    <span class="call">free</span>(methods)
<span id="line-257" class="line-number ">257</span>}
<span id="line-258" class="line-number empty-line">258</span>
<span id="line-259" class="line-number ">259</span><span class="comment">@todo:
<span id="line-260" class="line-number ">260</span>
<span id="line-261" class="line-number ">261</span>•	Comentario sobre el rendimiento: Mencionar que, aunque esta técnica simplifica la manipulación de los arrays, los diccionarios aún suelen ser más rápidos en acceso directo, lo cual puede ser importante en contextos donde el rendimiento sea crítico.
<span id="line-262" class="line-number ">262</span></span>
<span id="line-263" class="line-number empty-line">263</span>
</code></pre>
			
			<div id="console">
				<hstack class="draggerTop">
					
					<spacer></spacer>
					<button id="show-console-button" onclick="run()">
						<?xml version="1.0" encoding="utf-8"?>
						<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M17.5 17.6L6.5 17.6M7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3Z" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</button>
				</hstack>
				<pre id="output" class="article-width">/var/folders/m9/xbnrbp5d1qb1pm_45jmsr5380000gn/T/array-as-dict.swift.no-extension:18:16: warning: subscript is accessed but result is unused
 16 | 
 17 | /***C:***/ dict[1] = Model(id: 1, name: "Some name")
 18 | /***R:***/ dict[1] 
    |                `- warning: subscript is accessed but result is unused
 19 | /***U:***/ dict[1]?.name = "New name"
 20 | /***D:***/ dict[1] = nil

/var/folders/m9/xbnrbp5d1qb1pm_45jmsr5380000gn/T/array-as-dict.swift.no-extension:30:40: warning: expression of type 'Model?' is unused
 28 | // Podemos leer un elemento en el array de varias maneras:
 29 | 
 30 | /***R:***/ array.filter { $0.id == 1 }.first
    |                                        `- warning: expression of type 'Model?' is unused
 31 | /***R:***/ array[0] // *(inseguro, puede crashear)*
 32 | /***R:***/ 

/var/folders/m9/xbnrbp5d1qb1pm_45jmsr5380000gn/T/array-as-dict.swift.no-extension:31:17: warning: subscript is accessed but result is unused
 29 | 
 30 | /***R:***/ array.filter { $0.id == 1 }.first
 31 | /***R:***/ array[0] // *(inseguro, puede crashear)*
    |                 `- warning: subscript is accessed but result is unused
 32 | /***R:***/ 
 33 | if let idx = array.firstIndex(where: {$0.id == 1}) {

/var/folders/m9/xbnrbp5d1qb1pm_45jmsr5380000gn/T/array-as-dict.swift.no-extension:34:10: warning: subscript is accessed but result is unused
 32 | /***R:***/ 
 33 | if let idx = array.firstIndex(where: {$0.id == 1}) {
 34 |     array[idx]
    |          `- warning: subscript is accessed but result is unused
 35 | }
 36 | 
<button onclick="gotomatchingline(146)">146</button> ✅ Cristian is equal to Cristian
<button onclick="gotomatchingline(158)">158</button> ✅ Cristian Felipe is equal to Cristian Felipe
<button onclick="gotomatchingline(165)">165</button> ✅ Cristian is equal to Cristian
<button onclick="gotomatchingline(167)">167</button> ✅ nil is equal to nil
</pre></div>
			<div id="cusdis_thread"
				data-host="https://cusdis.com"
				data-app-id="b8c56104-c011-47cf-8841-8eb04a748bb7"
				data-page-id="{{ PAGE_ID }}"
				data-page-url="{{ PAGE_URL }}"
				data-page-title="{{ PAGE_TITLE }}"
			></div>
		</main>

		<script async defer src="https://cusdis.com/js/cusdis.es.js"></script>

		<script src="js/main.js"></script>
		<script>
			function loadContent(url, targetId) {
				fetch(url)
				.then(response => response.text())
				.then(html => {
					const parser = new DOMParser();
					const doc = parser.parseFromString(html, 'text/html');
					const newContent = doc.getElementById(targetId);
					
					if (newContent) {
						document.getElementById(targetId).innerHTML = newContent.innerHTML;
					} else {
						console.error(`No se encontró un elemento con id ${targetId} en la respuesta.`);
					}
				})
				.catch(error => console.error('Error al cargar el contenido:', error));
			}
			
			// Ejemplo de uso
			// loadContent('/ruta/a/recurso', 'main');
		</script>
		<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
			':35729/livereload.js?snipver=2"></' + 'script>')</script>
	</body>
</html>